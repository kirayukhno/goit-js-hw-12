{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\naxios.defaults.params = {\n    key: \"52836672-a9b4603c312b0d6cca2d3ae03\",\n    q: \"\",\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: \"true\",\n    per_page: 15,\n}\nexport const getImagesByQuery = async (query, page) => {\n    try {\n        const response = await axios.get(\"\", {\n            params: {\n                q: query,\n                page: page,\n            },\n        });\n        if (!response.data || !response.data.hits) {\n            iziToast.error({\n                message: \"Something went wrong with Pixabay API.\",\n                position: \"topRight\",\n                backgroundColor: \"#EF4040\",\n                progressBarColor: \"#B51B1B\",\n                messageColor: \"#fff\",\n                close: true,\n                maxWidth: 432,\n            });\n            throw new Error(\"Invalid response\");\n        }\n        return {\n            hits: response.data.hits,\n            totalHits: response.data.totalHits,\n        };\n    } catch (error) {\n        console.log(\"Error from Pixabay API: \", error.message);\n        iziToast.error({\n        message: \"Failed to fetch images from Pixabay. Please try again later!\",\n        position: \"topRight\",\n        backgroundColor: \"#EF4040\",\n        progressBarColor: \"#B51B1B\",\n        messageColor: \"#fff\",\n        close: true,\n        maxWidth: 432,\n        });\n        throw error;\n    }\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\"ul.gallery\");\nconst loader = document.querySelector(\"span.loader\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\n\nconst slb = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n});\n\nexport const createGallery = images => {\n    gallery.insertAdjacentHTML(\"beforeend\", images\n        .map(\n            ({\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            }) =>\n                `\n                <li class=\"gallery-item\">\n                    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n                    </a>\n                    <div class=\"gallery-item-info\">\n                        <p class=\"gallery-text\"><span class=\"title\">Likes</span>${likes}</p>\n                        <p class=\"gallery-text\"><span class=\"title\">Views</span>${views}</p>\n                        <p class=\"gallery-text\"><span class=\"title\">Comments</span>${comments}</p>\n                        <p class=\"gallery-text\"><span class=\"title\">Downloads</span>${downloads}</p>\n                    </div>\n                </li>\n                `\n        ).join(\"\")\n    )\n    slb.refresh();\n};\n\nexport const clearGallery = () => {\n    gallery.innerHTML = \"\";\n};\n\nexport const showLoader = () => {\n    loader.classList.add(\"is-visible\");\n};\n\nexport const hideLoader = () => {\n    loader.classList.remove(\"is-visible\");\n};\n\nexport const showLoadMoreButton = () => {\n    loadMoreBtn.classList.add(\"is-visible\");\n};\n\nexport const hideLoadMoreButton = () => {\n    loadMoreBtn.classList.remove(\"is-visible\");\n};","import { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton,} from \"./js/render-functions\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".form\");\nconst searchInput = document.querySelector('input[name=\"search-text\"]');\nconst submitButton = form.querySelector('button[type=\"submit\"]');\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\n\nlet currentQuery = \"\";\nlet currentPage = 1;\nlet totalHits = 0;\n\nhideLoadMoreButton();\nform.addEventListener(\"submit\", onSubmit);\nloadMoreBtn.addEventListener(\"click\", onLoadMore);\nasync function onSubmit(event) {\n    event.preventDefault();\n    const query = searchInput.value.trim();\n    if (!query) {\n        iziToast.error({\n            message: \"Enter a valid keyword!\",\n            position: \"topRight\",\n            backgroundColor: \"#EF4040\",\n            progressBarColor: \"#B51B1B\",\n            messageColor: \"#fff\",\n            close: true,\n            maxWidth: 432,\n            });\n        return;\n    }\n    currentQuery = query;\n    currentPage = 1;\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n    submitButton.disabled = true;\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage);\n        if (data.hits.length === 0) {\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\",\n                backgroundColor: \"#EF4040\",\n                progressBarColor: \"#B51B1B\",\n                messageColor: \"#fff\",\n                close: true,\n                maxWidth: 432,\n            });\n            return;\n        }\n        totalHits = data.totalHits;\n        createGallery(data.hits);\n        if (currentPage * 15 < totalHits) {\n            showLoadMoreButton();\n        }\n        else {\n            iziToast.error({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n                backgroundColor: \"#EF4040\",\n                progressBarColor: \"#B51B1B\",\n                messageColor: \"#fff\",\n                close: true,\n                maxWidth: 432,\n            });\n        }\n    } catch(error) {\n            console.log(error);\n            iziToast.error({\n                message: \"Something went wrong. Please try again later!\",\n                position: \"topRight\",\n                backgroundColor: \"#EF4040\",\n                progressBarColor: \"#B51B1B\",\n                messageColor: \"#fff\",\n                close: true,\n                maxWidth: 432,\n            });\n    } finally {\n        hideLoader();\n        submitButton.disabled = false;\n        form.reset();\n    }\n}\n\nasync function onLoadMore() {\n    currentPage += 1;\n    showLoader();\n    loadMoreBtn.disabled = true;\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage);\n        createGallery(data.hits);\n        if (currentPage * 15 >= totalHits) {\n            hideLoadMoreButton();\n            iziToast.error({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n                backgroundColor: \"#EF4040\",\n                progressBarColor: \"#B51B1B\",\n                messageColor: \"#fff\",\n                close: true,\n                maxWidth: 432,\n            });\n        }\n    } catch (error) {\n        console.log(error);\n        iziToast.error({\n            message: \"Something went wrong with loading. Please try again later!\",\n            position: \"topRight\",\n            backgroundColor: \"#EF4040\",\n            progressBarColor: \"#B51B1B\",\n            messageColor: \"#fff\",\n            close: true,\n            maxWidth: 432,\n        });\n    } finally {\n        hideLoader();\n        loadMoreBtn.disabled = false;\n        smoothScroll();\n    }\n}\n\nfunction smoothScroll() {\n    const card = document.querySelector(\".gallery-item\");\n    if (card) {\n        window.scrollBy({\n            top: (card.getBoundingClientRect().height * 2),\n            left: 0,\n            behavior: \"smooth\",\n        });        \n    }\n}"],"names":["axios","getImagesByQuery","query","page","response","iziToast","error","gallery","loader","loadMoreBtn","slb","SimpleLightbox","createGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","searchInput","submitButton","currentQuery","currentPage","totalHits","onSubmit","onLoadMore","event","data","smoothScroll","card"],"mappings":"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"}